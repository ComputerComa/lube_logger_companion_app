<!DOCTYPE html>
<html lang="en" data-bs-theme="dark">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="apple-mobile-web-app-title" content="LubeLogger" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>API - LubeLogger</title>
    <link rel="stylesheet" href="/lib/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="/lib/bootstrap/dist/css/bootstrap-icons.css" />
    <link rel="stylesheet" href="/lib/bootstrap-datepicker/css/bootstrap-datepicker.min.css" />
    <link rel="stylesheet" href="/lib/bootstrap-tagsinput/bootstrap-tagsinput.css" />
    <link rel="stylesheet" href="/css/site.css" />
    <link rel="stylesheet" href="/css/loader.css" />
    <link rel="stylesheet" href="/sweetalert/sweetalert2.min.css" />
    <link rel="icon" sizes="192x192" href="/defaults/lubelogger_icon_192.png" />
    <link rel="icon" sizes="128x128" href="/defaults/lubelogger_icon_128.png" />
    <link rel="apple-touch-icon" sizes="128x128" href="/defaults/lubelogger_icon_128.png" />
    <link rel="apple-touch-icon-precomposed" sizes="128x128" href="/defaults/lubelogger_icon_128.png" />
    <link rel="apple-touch-startup-image" href="/defaults/lubelogger_launch.png" />
    <link rel="manifest" href="/manifest.json">
    <script src="/lib/jquery/dist/jquery.min.js"></script>
    <script src="/js/shared.js?v=1.4.1"></script>
    <script src="/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/lib/bootstrap-datepicker/js/bootstrap-datepicker.min.js"></script>
    <script src="/lib/bootstrap-tagsinput/bootstrap-tagsinput.js"></script>
    <script src="/sweetalert/sweetalert2.all.min.js"></script>
    <script src="/js/loader.js?v=1.4.1"></script>
    <script>
        function getGlobalConfig() {
            return {
                useDarkMode: "True" == "True" || ("False" == "True" && window.matchMedia('(prefers-color-scheme: dark)').matches),
                enableCsvImport : "True" == "True",
                useMarkDown: "False" == "True",
                currencySymbol: decodeHTMLEntities("$"),
                useThreeDecimals: "True" == "True",
                useMPG: "True" == "True",
                firstDayOfWeek: 0
            }
        }
        function getShortDatePattern() {
            return {
                pattern: "mm/dd/yyyy"
            }
        }
        function globalParseFloat(input){
            //remove thousands separator.
            var thousandSeparator = decodeHTMLEntities(",");
            var decimalSeparator = decodeHTMLEntities(".");
            var currencySymbol = decodeHTMLEntities("$");
            if (input == "---") {
                input = "0";
            }
            //strip thousands from input.
            input = input.replace(thousandSeparator, "");
            //convert to JS format where decimal is only separated by .
            input = input.replace(decimalSeparator, ".");
            //remove any currency symbol
            input = input.replace(currencySymbol, "");
            return parseFloat(input);
        }
        function globalFloatToString(input) {
            var decimalSeparator = decodeHTMLEntities(".");
            input = input.replace(".", decimalSeparator);
            return input;
        }
        function fixDecimalInput(input, numOfDecimals) {
            if ("True" == "True") {
                //get the decimal separator.
                var decimalSeparator = decodeHTMLEntities(".");
                var inputText = $(input).val().trim();
                inputText = inputText.replace(decimalSeparator, '');
                inputText = +inputText;
                if (isNaN(inputText)){
                    return;
                }
                inputText = inputText.toString();
                if (inputText == '') {
                    return;
                };
                //check number of decimals.
                if (inputText.length <= numOfDecimals) {
                    //less than number of decimals, assume everything is behind the decimal.
                    inputText = `0${decimalSeparator}${inputText}`; //add leading zero.
                    $(input).val(inputText);
                } else {
                    //check if leading zero
                    var charToSlice = numOfDecimals * -1;
                    var charsBehindDecimal = inputText.slice(charToSlice);
                    var charsFrontDecimal = inputText.substr(0, inputText.length - numOfDecimals);
                    inputText = `${charsFrontDecimal}${decimalSeparator}${charsBehindDecimal}`;
                    $(input).val(inputText);
                }
            }
        }
        function interceptDecimalKeys(event) {
            if ("True" == "True") {
                if (event.which == 190 || event.which == 188) {
                    event.preventDefault(); //intercept keys.
                }
            }
        }
        function genericErrorMessage(){
            return decodeHTMLEntities('An error has occurred, please try again later');
        }
        function globalAppendCurrency(input){
            //check currency symbol position
            var currencySymbolPosition = "0";
            var currencySymbol = decodeHTMLEntities("$");
            switch (currencySymbolPosition) {
                case "0":
                    return `${currencySymbol}${input}`;
                    break;
                case "1":
                    return `${input}${currencySymbol}`;
                    break;
                case "2":
                    return `${currencySymbol} ${input}`;
                    break;
                case "3":
                    return `${input} ${currencySymbol}`;
                    break;
            }
        }
        function setThemeBasedOnDevice() {
            var systemPrefersDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches;
            if (systemPrefersDarkMode) {
                $(document.documentElement).attr("data-bs-theme", "dark");
            }
        }
    </script>
    
</head>
<body>
    <div b-bk3umu3xao class="container" style="height:85vh;">
        <main b-bk3umu3xao role="main">
            <div class="row">
    <div class="d-flex justify-content-center">
        <h6 class="display-6 mt-2">API</h6>
    </div>
</div>
<div class="row">
    <div class="d-flex justify-content-center">
        <p class="lead">If authentication is enabled, use the credentials of the user for Basic Auth(RFC2617)</p>
    </div>
</div>
<hr />
<div class="row">
    <div class="col-1">
        <h6>Method</h6>
    </div>
    <div class="col-5 copyable">
        <h6>Endpoint</h6>
    </div>
    <div class="col-3">
        <h6>Description</h6>
    </div>
    <div class="col-3">
        <h6>Parameters</h6>
    </div>
</div>
<div class="row api-method">
    <div class="col-1">
        GET
    </div>
    <div class="col-5 copyable">
        <code>/api/vehicles</code>
    </div>
    <div class="col-3">
        Returns a list of vehicles
    </div>
    <div class="col-3">
        No Params
    </div>
</div>
<div class="row api-method">
    <div class="col-1">
        GET
    </div>
    <div class="col-5 copyable">
        <code>/api/vehicle/info</code>
    </div>
    <div class="col-3">
        Returns details for list of vehicles or specific vehicle
    </div>
    <div class="col-3">
        VehicleId - Id of Vehicle(optional)
    </div>
</div>
<div class="row api-method">
    <div class="col-1">
        GET
    </div>
    <div class="col-5 copyable">
        <code>/api/vehicle/adjustedodometer</code>
    </div>
    <div class="col-3">
        Returns odometer reading with adjustments applied
    </div>
    <div class="col-3">
        vehicleId - Id of Vehicle
        <br />
        odometer - Unadjusted odometer
    </div>
</div>
<div class="row api-method">
    <div class="col-1">
        GET
    </div>
    <div class="col-5 copyable">
        <code>/api/vehicle/odometerrecords</code>
    </div>
    <div class="col-3">
        Returns a list of odometer records for the vehicle
    </div>
    <div class="col-3">
        vehicleId - Id of Vehicle
    </div>
</div>
<div class="row api-method">
    <div class="col-1">
        GET
    </div>
    <div class="col-5 copyable">
        <code>/api/vehicle/odometerrecords/latest</code>
    </div>
    <div class="col-3">
        Returns last reported odometer for the vehicle
    </div>
    <div class="col-3">
        vehicleId - Id of Vehicle
    </div>
</div>
<div class="row api-method">
    <div class="col-1">
        POST
    </div>
    <div class="col-5 copyable">
        <code>/api/vehicle/odometerrecords/add</code>
    </div>
    <div class="col-3">
        Adds Odometer Record to the vehicle
    </div>
    <div class="col-3">
        vehicleId - Id of Vehicle
        <br />
        Body(form-data): {<br />
        date - Date to be entered<br />
        initialOdometer - Initial Odometer reading(optional)<br />
        odometer - Odometer reading<br />
        notes - notes(optional)<br />
        tags - tags separated by space(optional)<br />
        extrafields - <a class="link-body-emphasis link-offset-2 link-underline-opacity-25 link-underline-opacity-100-hover reminder-calendar-item" onclick="showExtraFieldsInfo()">extrafields(optional)</a><br />
        }
    </div>
</div>
<div class="row api-method">
    <div class="col-1">
        GET
    </div>
    <div class="col-5 copyable">
        <code>/api/vehicle/servicerecords</code>
    </div>
    <div class="col-3">
        Returns a list of service records for the vehicle
    </div>
    <div class="col-3">
        vehicleId - Id of Vehicle
    </div>
</div>
<div class="row api-method">
    <div class="col-1">
        POST
    </div>
    <div class="col-5 copyable">
        <code>/api/vehicle/servicerecords/add</code>
    </div>
    <div class="col-3">
        Adds Service Record to the vehicle
    </div>
    <div class="col-3">
        vehicleId - Id of Vehicle
        <br />
        Body(form-data): {<br />
        date - Date to be entered<br />
        odometer - Odometer reading<br />
        description - Description<br/>
        cost - Cost<br />
        notes - notes(optional)<br />
        tags - tags separated by space(optional)<br />
        extrafields - <a class="link-body-emphasis link-offset-2 link-underline-opacity-25 link-underline-opacity-100-hover reminder-calendar-item" onclick="showExtraFieldsInfo()">extrafields(optional)</a><br />
        }
    </div>
</div>
<div class="row api-method">
    <div class="col-1">
        GET
    </div>
    <div class="col-5 copyable">
        <code>/api/vehicle/repairrecords</code>
    </div>
    <div class="col-3">
        Returns a list of repair records for the vehicle
    </div>
    <div class="col-3">
        vehicleId - Id of Vehicle
    </div>
</div>
<div class="row api-method">
    <div class="col-1">
        POST
    </div>
    <div class="col-5 copyable">
        <code>/api/vehicle/repairrecords/add</code>
    </div>
    <div class="col-3">
        Adds Repair Record to the vehicle
    </div>
    <div class="col-3">
        vehicleId - Id of Vehicle
        <br />
        Body(form-data): {<br />
        date - Date to be entered<br />
        odometer - Odometer reading<br />
        description - Description<br />
        cost - Cost<br />
        notes - notes(optional)<br />
        tags - tags separated by space(optional)<br />
        extrafields - <a class="link-body-emphasis link-offset-2 link-underline-opacity-25 link-underline-opacity-100-hover reminder-calendar-item" onclick="showExtraFieldsInfo()">extrafields(optional)</a><br />
        }
    </div>
</div>
<div class="row api-method">
    <div class="col-1">
        GET
    </div>
    <div class="col-5 copyable">
        <code>/api/vehicle/upgraderecords</code>
    </div>
    <div class="col-3">
        Returns a list of upgrade records for the vehicle
    </div>
    <div class="col-3">
        vehicleId - Id of Vehicle
    </div>
</div>
<div class="row api-method">
    <div class="col-1">
        POST
    </div>
    <div class="col-5 copyable">
        <code>/api/vehicle/upgraderecords/add</code>
    </div>
    <div class="col-3">
        Adds Upgrade Record to the vehicle
    </div>
    <div class="col-3">
        vehicleId - Id of Vehicle
        <br />
        Body(form-data): {<br />
        date - Date to be entered<br />
        odometer - Odometer reading<br />
        description - Description<br />
        cost - Cost<br />
        notes - notes(optional)<br />
        tags - tags separated by space(optional)<br />
        extrafields - <a class="link-body-emphasis link-offset-2 link-underline-opacity-25 link-underline-opacity-100-hover reminder-calendar-item" onclick="showExtraFieldsInfo()">extrafields(optional)</a><br />
        }
    </div>
</div>
<div class="row api-method">
    <div class="col-1">
        GET
    </div>
    <div class="col-5 copyable">
        <code>/api/vehicle/taxrecords</code>
    </div>
    <div class="col-3">
        Returns a list of tax records for the vehicle
    </div>
    <div class="col-3">
        vehicleId - Id of Vehicle
    </div>
</div>
<div class="row api-method">
    <div class="col-1">
        POST
    </div>
    <div class="col-5 copyable">
        <code>/api/vehicle/taxrecords/add</code>
    </div>
    <div class="col-3">
        Adds Tax Record to the vehicle
    </div>
    <div class="col-3">
        vehicleId - Id of Vehicle
        <br />
        Body(form-data): {<br />
        date - Date to be entered<br />
        description - Description<br />
        cost - Cost<br />
        notes - notes(optional)<br />
        tags - tags separated by space(optional)<br />
        extrafields - <a class="link-body-emphasis link-offset-2 link-underline-opacity-25 link-underline-opacity-100-hover reminder-calendar-item" onclick="showExtraFieldsInfo()">extrafields(optional)</a><br />
        }
    </div>
</div>
<div class="row api-method">
    <div class="col-1">
        GET
    </div>
    <div class="col-5 copyable">
        <code>/api/vehicle/gasrecords</code>
    </div>
    <div class="col-3">
        Returns a list of gas records for the vehicle
    </div>
    <div class="col-3">
        vehicleId - Id of Vehicle
        <br />
        useMPG(bool) - Use Imperial Units and Calculation
        <br />
        useUKMPG(bool) - Use UK Imperial Calculation
    </div>
</div>
<div class="row api-method">
    <div class="col-1">
        POST
    </div>
    <div class="col-5 copyable">
        <code>/api/vehicle/gasrecords/add</code>
    </div>
    <div class="col-3">
        Adds Gas Record to the vehicle
    </div>
    <div class="col-3">
        vehicleId - Id of Vehicle
        <br />
        Body(form-data): {<br />
        date - Date to be entered<br />
        odometer - Odometer reading<br />
        fuelConsumed - Fuel Consumed<br />
        cost - Cost<br />
        isFillToFull(bool) - Filled To Full<br />
        missedFuelUp(bool) - Missed Fuel Up<br />
        notes - notes(optional)<br />
        tags - tags separated by space(optional)<br />
        extrafields - <a class="link-body-emphasis link-offset-2 link-underline-opacity-25 link-underline-opacity-100-hover reminder-calendar-item" onclick="showExtraFieldsInfo()">extrafields(optional)</a><br />
        }
    </div>
</div>
<div class="row api-method">
    <div class="col-1">
        GET
    </div>
    <div class="col-5 copyable">
        <code>/api/vehicle/reminders</code>
    </div>
    <div class="col-3">
        Returns a list of reminders for the vehicle
    </div>
    <div class="col-3">
        vehicleId - Id of Vehicle
    </div>
</div>
    <div class="row api-method">
        <div class="col-1">
            GET
        </div>
        <div class="col-5 copyable">
            <code>/api/vehicle/reminders/send</code>
        </div>
        <div class="col-3">
            Send reminder emails out to collaborators based on specified urgency.
        </div>
        <div class="col-3">
            (must be root user)<br />
            urgencies[]=[NotUrgent,Urgent,VeryUrgent,PastDue]
        </div>
    </div>
    <div class="row api-method">
        <div class="col-1">
            GET
        </div>
        <div class="col-5 copyable">
            <code>/api/makebackup</code>
        </div>
        <div class="col-3">
            Creates a snapshot/backup of the DB at the time and returns a URL to download it.
        </div>
        <div class="col-3">
            No Params(must be root user)
        </div>
    </div>
    <div class="row api-method">
        <div class="col-1">
            GET
        </div>
        <div class="col-5 copyable">
            <code>/api/cleanup</code>
        </div>
        <div class="col-3">
            Clears out temp files. Deep clean will also delete unlinked thumbnails and documents. Returns number of deleted files.
        </div>
        <div class="col-3">
            (must be root user)<br />
            deepClean(bool) - Perform deep clean
        </div>
    </div>
<script>
    $('.copyable').on('click', function (e) {
        copyToClipboard(e.currentTarget);
    })
    function showExtraFieldsInfo(){
        Swal.fire({
            title: "Format for Extra Fields",
            html: "extrafields[i][name] - Name of Extra Field<br/>extrafields[i][value] - Value of Extra Field<br/>i is an integer that starts at 0 and increments with each extrafield",
            icon: "info"
        });
    }
</script>
        </main>
    </div>
<script defer src="https://static.cloudflareinsights.com/beacon.min.js/vcd15cbe7772f49c399c6a5babf22c1241717689176015" integrity="sha512-ZpsOmlRQV6y907TI0dKBHq9Md29nnaEIPlkf84rnaERnq6zvWvPUqr2ft8M1aS28oN72PdrCzSjY4U6VaAw1EQ==" data-cf-beacon='{"version":"2024.11.0","token":"d893446dbdf943268c8d20f1b93c1ee7","r":1,"server_timing":{"name":{"cfCacheStatus":true,"cfEdge":true,"cfExtPri":true,"cfL4":true,"cfOrigin":true,"cfSpeedBrain":true},"location_startswith":null}}' crossorigin="anonymous"></script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9995ecbfcee24c9a',t:'MTc2MjI3ODMyMw=='};var a=document.createElement('script');a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
